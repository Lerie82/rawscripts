<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="X-UA-Compatible" content="chrome=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>RawScripts - Scriptlist</title>
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui.min.js"></script>
	<script type="text/javascript" src="js/restricted/scriptlist.js"></script>
	<script src="js/json2.js" type="text/javascript"></script>
	<link href="css/jquery-ui.css" rel="stylesheet" type="text/css"/>
	<link href="css/scriptlist.css" rel="stylesheet" type="text/css"/>
	<link rel="shortcut icon" href="/favicon.ico">
	<script type="text/javascript">
	$(document).ready(function(){
		//window.addEventListener("message", uploadWindow, false); 
		refreshList();
		$('#recipient').keyup(function(event){if(event.which==188)tokenize('recipient')});
		$('#collaborator').keyup(function(event){if(event.which==188)tokenize('collaborator')});
		$('#renameField').keydown(function(e){if(e.which==13){e.preventDefault(); renameScript()}});
		$('#recipient').keydown(function(e){if(e.which==13){e.preventDefault();}});
		$('#subject').keydown(function(e){if(e.which==13){e.preventDefault();}});
		$('#newScript').keydown(function(e){if(e.which==13){e.preventDefault();createScript()}});
	});

	</script>
</head>

<body>
<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-16492540-1']);
_gaq.push(['_trackPageview']);

(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

	</script>
	<div id="emailpopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block">
			<div class="popup">
				<a href="javascript:hideEmailPrompt()" class="close"><img src="/images/close.png"></a>
				<br /><br />
				Send Script
				<br /><br />
				<label for="recipient">Recipients (max 5, comma seperated)</label>
				<br />
				<div id="recipients"></div>
				<input class="TEXT" type='text' name='recipient' id='recipient' style="width:400px" />
				<br />
				<label for="subject">Subject</label>
				<br />
				<input class="TEXT" type='text' name='subject' id='subject' style="width:400px" />
				<br />
				<label for="message">Message (optional)</label>
				<br />
				<div class="TEXT" contentEditable='true' name='message' id='message' style="width:400px; height:110px; overflow:auto;"></div>
				<br>
				<select id="emailTitle">
					<option>Without title Page</option>
					<option>With title Page</option>
				</select>
				<a id="edit_title_href" href="#" target="_blank">Edit Title Page</a>
				<br /><br>
				<input type='button' id="emailS" onClick='emailScript()' value='Send' />
				<br />
				<b>Note:</b> you will automatically get a copy yourself
			</div>
		</div>
	</div>
	<div id="renamepopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block" style="width:400px;">
			<div class="popup">
				<a href="javascript:hideRenamePrompt()" class="close"><img src="/images/close.png"></a>
				<br />

				<p id="renameTitle"></p>
				<br />
				<input type="hidden" value="blank" id="resource_id" />
				<input class="TEXT" type='text' name='renameField' id='renameField' style="width:350px" />
				<br />
				<input type='button' onClick='renameScript()' value='Rename' />

				<br />
			</div>
		</div>
	</div>
	<div id="uploadpopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block" style="width:400px">
			<a href="javascript:hideUploadPrompt()" class="close"><img src="/images/close.png"></a><br><br>
			<iframe id="uploadFrame" style="float:none;" frameborder="0" height="200px" src="/convert">
			</iframe>
			<div id="uploading" style="display:none"><p>Converting script...</p><img src="images/uploading.gif" /><br><br><br></div>
		</div>
	</div>
	<div id="newscriptpopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block" style="width:400px;">
			<div class="popup">
				<a href="javascript:hideNewScriptPrompt()" class="close"><img src="/images/close.png"></a>
				<br />

				<p>New Script Title</p>
				<br />
				<input class="TEXT" type='text' name='newScript' id='newScript' style="width:350px" />
				<br />
				<input type='button' onClick='createScript()' value='Create' id = "createScriptButton" /><img src="images/createScriptIcon.gif" id="createScriptIcon" style="visibility:hidden" />

				<br />
			</div>
		</div>
	</div>
	<div id="exportpopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block" style="width:500px;">
			<div class="popup">
				<a href="javascript:hideExportPrompt()" class="close"><img src="/images/close.png"></a>
				<br />
				<p>Export as...</p>
				<table cellspacing='0' cellpadding='0' style='border:none; width:450px' id="exportList"></table>
				<br />
				<input type='button' onClick='exportScripts()' value='Export' />

				<br />
			</div>
		</div>
	</div>
	<div id="sharepopup" style="visibility:hidden; position:absolute; width:100%; height:100%; top:0; left:0;  z-index:100">
		<div id="fade" style="background:#fff; opacity:0.5; height:100%; width:100%; position:fixed"></div>
		<div class="popup_block" style="width:450px;">
			<div class="popup">
				<a href="javascript:hideSharePrompt()" class="close"><img src="/images/close.png"></a>
				<br /><br />
				Share Script: <b id="shareTitle"></b>
				<br /><br>
				<table id="hasAccess" width="350px" cellspacing=0>
				</table>
				<br>
				<br />
				<p>To be added: (comma seperated)</p>
				<div id="collaborators"></div>
				<input class="TEXT" type='text' name='collaborator' id='collaborator' />
				<br />
				<p>Note: You can only share with Gmail or Yahoo users.</p>
				<input id="shareS" type='button' onClick='shareScript()' value='Send Invitations' />
				<input type="hidden" value="blank" id="shareResource_id" />


			</div>
		</div>
	</div>
	<div id="header" style="position:fixed; top:0; left:0; right:0; height:100pt;">
		<div id="logo">
			<h1><a href="/">RawScripts.com</a></h1>
		</div>
		<div style="float:right; margin:5px 10px 0 0;"><b id="user">{{  user  }}</b>  |  <a href="/">Home</a>  |  <a href="{{ sign_out }}">Sign Out</a></div>
		<div style="width:100%; clear:both; background-color:#6490E6; padding:3px 0; position:absolute; bottom:0; border-top:2px #ccc solid; border-bottom:2px #ccc solid;">
			<div id="static_buttons" style="float:left">
				<input type='button' onClick="newScriptPrompt()" value='New Script' />
				<input type="button" onClick="uploadPrompt()" value="Upload" />
			</div>
			<div id="owned_buttons" class="buttons_block" style="float:left; display:block;margin-left:55px;">
				<input type="button" onClick="renamePrompt()" value="Rename" />
				<input type='button' onClick="duplicate()" value='Duplicate' />
				<input type='button' onClick="exportPrompt()" value='Export' />
				<input type='button' onClick="batchProcess('delete')" value='Move to Trash' style="margin-left:55px; margin-right:15px;" />
				<select name="move_to_folder" id="move_to_folder" onchange="moveToFolder(this.options[this.selectedIndex].value)">
					<option value="move_to">Move to Folder...</option>
					
				</select>
			</div>
			<div id="shared_buttons" class="buttons_block" style="float:left; display:none;margin-left:55px;">
				<input type='button' onClick="exportPrompt()" value='Export' />
			</div>
			<div id="trash_buttons" class="buttons_block" style="float:left; display:none;margin-left:55px;">
				<input type='button' onClick="batchProcess('undelete')" value='Undelete' />
				<input type='button' onClick="batchProcess('hardDelete')" value='Delete Permanantly' style="margin-left:20px" />
			</div>
			<div id="refresh"><a href="javascript:refreshList()"><img id="refresh_icon" src="images/refresh_icon.gif">Refresh</a></div>
		</div>
	</div>


	<div>

		<div id="nav">
			<div id="ownedFolder" class="tab current">My Scripts</div>
			<div id="sharedFolder" class="tab">Friends' Scripts</div>
			<div id="trashFolder" class="tab">Trash</div>
			<div id="nf_div">
				<input type="button" name="new_folder" value="New Folder" id="new_folder" onclick="newFolder()">
			</div>
			<div id="user_folders"></div>
			
		</div>

		<div id="contents" style="background-color:#6490E6; position:absolute; right:0; left:160px; bottom:0; top:100pt;">

			<div id="owned" class="folderContents" style="display:block">
				<div class="contentsHeader">
					<table width="100%">
						<tr>
							<td style='width:15px;'><input onClick='selectAll(this, "listItems")' type='checkbox' value='all' /></td>
							<td>My Scripts</td>
							<td style="width:120px" align="center">Folder</td>
							<td style="width:120px" align="center">Shared With</td>
							<td style="width:120px" align="center">Email</td>
							<td style="width:160px" align="center">Last Modified</td>
						</tr>
					</table>
				</div>
				<div id="content"></div>
				<div id="loading"><div style="" align="center">Loading...</div></div>
				<div id="noentries" class="none_of_type" style="" align="center">You haven't started any scripts yet.<br><br><a href='javascript:newScriptPrompt()'>Start a new script</a> or <a href="javascript:uploadPrompt()">Upload an existing one</a> now.</div>
			</div>
			<div id="shared" class="folderContents" style="display:none">
				<div class="contentsHeader">
					<table width="100%">
						<tr>
							<td style='width:15px;'><input onClick='selectAll(this, "sharedListItems")' type='checkbox' value='all' /></td>
							<td>Friends' Scripts</td>
							<td style="width:120px" align="right">Owner</td>
							<td style="width:160px" align="center">Last Modified</td>
						</tr>
					</table>
				</div>
				<div id="sharedContent"></div>
				<div id="sharedLoading"><div style="" align="center">Loading...</div></div>
				<div id="sharedNoEntries" class="none_of_type" align="center">No one is sharing scripts with you.</div>
			</div>
			<div id="trash" class="folderContents" style="display:none">
				<div class="contentsHeader">
					<table width="100%">
						<tr>
							<td style='width:15px;'><input onClick='selectAll(this, "trashListItems")' type='checkbox' value='all' /></td>
							<td>Trash</td>
							<td style="width:160px" align="center">Last Modified</td>
						</tr>
					</table>
				</div>
				<div id="trashContent"></div>
				<div id="trashLoading"><div style="" align="center">Loading...</div></div>
				<div id="trashNoEntries" class="none_of_type" align="center"><p>You have no trash.</p><p>You are a very clean person.</p></div>
			</div>
		</div>
	</div>
</body>
</html>
